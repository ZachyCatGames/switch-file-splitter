Only tested using clang, but msvc should also work.
